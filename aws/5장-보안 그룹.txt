1024

아마존 웹 서비스

네트워크 주소
네트워크 프로토콜

보안 그룹:
 - 인스턴스에 대한 접근(인바운드)과 인스턴스로부터의 접근(아웃바운드)에 대한 패킷을 포트 번호로 제어하기 위한 설정. (네트워크 제어: 패킷 필터 유형의 방화벽)

 - 예를 들면, EC2 인스턴스에 웹 서버를 구축한 경우, 웹 서버는 인터넷 상에 HTML 파일을 공개하기 위한 서버로 HTTP 프로토콜을 사용하여 통신함. 그렇기 때문에 80번 포트에 관련된 통신은 허가할 필요가 있지만, 반면에 80번 포트 이외의 불필요한 통신은 불법적인 접근에 이용될 수 있기 때문에 차단해야함.

 - 즉, 패킷들에 대한 필터링이 정책을 정의한 것이 보안 그룹.

 - 시스템의 전체적인 보안 요건을 감안한 보안 그룹을 생성하고, 인스턴스에 할당함으로써 포트별 통신을 임의로 제어. (EC2, RDB, ) (RDB는 애플리케이션에서 취급하는 기밀 정보를 처리하므로 보다 엄격하게 보안 그룹의 설정을 검토해야함.)

 - 보안 그룹을 생성할 때는 어디부터, 어디에 대해서, 어느 포트를 허용/차단할지 정의. (네트워크 제어: 패킷 필터 유형의 방화벽: 접근제어 리스트)

보안 정책:
 - 보안 그룹을 생성하기 전 검토.
 - 정보 자산의 보안 밤침을 정리한 것으로, 일반적으로 전체 시스템을 대상으로 함.
 - '어떤 정보 자산을', '어떤 위협으로부터', '어떻게 지키는가'에 대해서 규정.

 ex) 'RDS 인스턴스에서 관리하고 잇는 도서 정봐 부정 유출되지 않도록 대책을 실시한다'
 모든 송신자를 위한 22번 포트와 8080번 포트에 대한 통신을 허가 (웹 앱)
 모든 송신자를 위한 3306번 포트에 대한 통신을 허가 (DB)
 ->
 임의의 장소에서 8080번에 대한 통신을 허가 (웹 앱)
 EC2 인스턴스에서만 3306번 포트에 대한 통신을 허가 (DB)

EC2 보안 그룹 수정 절차:
 [EC2] - [보안 그룹] - [해당 보안 그룹]

인바운드: 인터넷을 포함한 외부 네트워크에서 EC2 인스턴스로 향하는 통신 정책의 하나.
아웃바운드: EC2 인스턴스에서 인터넷을 포함한 외부 네트워크로 향하는 통신 정책의 하나.

EC2 보안 정책 규칙 설정:
 - type: 통신을 허가하는 프로토콜. 프로토콜 선택 및 포트 범위를 수동으로 입력 가능.
 - protocol: 통신 프로토콜의 종류. ex) tcp, udp, icmp
 - port 범위: 포트 번호, 범위
 - 발신지 주소: 어느 곳에서 접근하는 통신인지를 지정. ip주소 혹은 CIDR 표기로 네트워크 지정 혹은 다른 보안 그룹. 임의의 장소로부터 요청되는 접근을 허가할 때는 0.0.0.0/0 (인바운드)

 - 인바운드 규칙: Custom TCP Rule: TCP, 8080, Anywhere 0.0.0.0/0(발신지) - EC2로 향하는 임의의 주소에서 8080포트를 사용하는 통신을 허용.
 - 아웃바운드 규칙: 모든 트래픽, All, 0~65535(포트범위), Anywhere 0.0.0.0/0(발신지) - EC2로부터 모든 통신을 허용


RDS 보안 그룹 설정:
 - RDS 인스턴스에 대한 통신을 EC2 인스턴스에서 제한하고 있음.
 - 따라서 EC2 인스턴의 개인 IP 주소를 확인. [EC2] - [인스턴스] - [EC2 인스턴스] - [Private IP]

 - 인바운드: 해당DB관련타입, TCP, 해당DB포트, EC2인스턴스의 프라이빗 IP
 - 아웃바운드: 모든 트래픽, All, 0~65535, Anywhere

보안 설정에 대한 동작 확인:
 1. 클라이언트 PC에서 동작 중인 ec2 인스턴스의 퍼블릭 DNS 혹은 IP 값으로 url에 접속
  - 프로토콜://[서버명,도메인명][:포트번호]/war명/파일명
 2. EC2 인스턴스에서 RDS 인스턴스에 대한 동작 확인
 3. 클라이언트 PC에서 EC2 인스턴스에 대한 SSH 통신 확인 (보안 정책으로 인해 되면 안됨)
 4. 클라이언트 PC에서 RDS 인스턴스에 대한 통신 확인 (보안 정책으로 인해 되면 안됨)


 





